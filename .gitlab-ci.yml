test-carotid:
  image: python:3.9.7
  before_script:
    - pip install numpy==1.22.4
    - pip install -e ./src
  script:
    - pytest ./tests/test_cli.py
    - pytest ./tests/heatmap_transform/test_heatmap_transform.py
    - pytest ./tests/centerline_transform/test_centerline_transform.py
    - pytest ./tests/polar_transform/test_polar_transform.py
    - pytest ./tests/segmentation_transform/test_segmentation_transform.py

test-docker-debian:
  image: debian:11.6
  before_script:
    - apt-get update
    - apt-get install install ca-certificates curl gnupg lsb-release -y
    - mkdir -p /etc/apt/keyrings
    - curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg
    - echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \
      $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null
    - apt-get update
    - apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y
  script:
    - source ./test.sh